<form class="{{cssClass}}" autocomplete="off">
  {{!-- Sheet Header --}}
  <header class="sheet-header">
    <img class="profile-img" src="{{actor.img}}" title="{{actor.name}}" data-edit="img"/>

    <div class="header-fields">
      <h1 class="charname">
        <input name="name" type="text" value="{{actor.name}}" placeholder="Character Name"/>
      </h1>
      <div class="level-display">
        {{localize "DND35ZUKUS.Level"}}: {{system.details.level}}
      </div>
    </div>

    <div class="header-stats">
      <div class="stat-box">
        <div class="stat-label">{{localize "DND35ZUKUS.HP"}}</div>
        <div class="stat-value">{{combat.hp.current}}/{{combat.hp.max}}</div>
      </div>
      <div class="stat-box" data-source-breakdown="ac">
        <div class="stat-label">{{localize "DND35ZUKUS.AC"}}</div>
        <div class="stat-value">{{combat.ac.total}}</div>
      </div>
      <div class="stat-box initiative-roll" data-source-breakdown="initiative">
        <div class="stat-label">{{localize "DND35ZUKUS.Initiative"}}</div>
        <div class="stat-value">{{combat.initiativeDisplay}}</div>
      </div>
    </div>
  </header>

  {{!-- Sheet Tabs --}}
  <nav class="sheet-tabs tabs" data-group="primary">
    <a class="item" data-tab="abilities">{{localize "DND35ZUKUS.Tabs.Abilities"}}</a>
    <a class="item" data-tab="combat">{{localize "DND35ZUKUS.Tabs.Combat"}}</a>
    <a class="item" data-tab="features">{{localize "DND35ZUKUS.Tabs.Features"}}</a>
  </nav>

  {{!-- Sheet Body --}}
  <section class="sheet-body">

    {{!-- Abilities Tab --}}
    <div class="tab abilities" data-group="primary" data-tab="abilities">
      <div class="abilities-grid">
        {{#each abilities as |ability|}}
        <div class="ability-card rollable" data-ability="{{ability.key}}" data-source-breakdown="abilities.{{ability.key}}">
          <div class="ability-label">{{ability.label}}</div>
          <div class="ability-score">
            <input type="number"
                   name="system.abilities.{{ability.key}}.value"
                   value="{{ability.baseValue}}"
                   data-dtype="Number"/>
          </div>
          <div class="ability-modifier">{{ability.modifierDisplay}}</div>
        </div>
        {{/each}}
      </div>

      {{!-- Saving Throws --}}
      <h3>{{localize "DND35ZUKUS.Saves.Fortitude"}}, {{localize "DND35ZUKUS.Saves.Reflex"}}, {{localize "DND35ZUKUS.Saves.Will"}}</h3>
      <div class="saves-grid">
        {{#each saves as |save|}}
        <div class="save-item rollable" data-save="{{save.key}}" data-source-breakdown="saves.{{save.key}}">
          <span class="save-label">{{save.label}}</span>
          <span class="save-value">{{save.display}}</span>
        </div>
        {{/each}}
      </div>
    </div>

    {{!-- Combat Tab --}}
    <div class="tab combat" data-group="primary" data-tab="combat">
      <div class="combat-grid">
        <div class="combat-stat">
          <div class="stat-label">{{localize "DND35ZUKUS.HP"}}</div>
          <div class="stat-value">
            <input type="number" name="system.hp.value" value="{{combat.hp.current}}" data-dtype="Number" style="width: 50px"/>
            /
            <span>{{combat.hp.max}}</span>
          </div>
        </div>

        <div class="combat-stat" data-source-breakdown="ac">
          <div class="stat-label">{{localize "DND35ZUKUS.AC"}} (Total)</div>
          <div class="stat-value">{{combat.ac.total}}</div>
        </div>

        <div class="combat-stat">
          <div class="stat-label">Touch AC</div>
          <div class="stat-value">{{combat.ac.touch}}</div>
        </div>

        <div class="combat-stat">
          <div class="stat-label">Flat-Footed AC</div>
          <div class="stat-value">{{combat.ac.flatFooted}}</div>
        </div>

        <div class="combat-stat" data-source-breakdown="bab">
          <div class="stat-label">{{localize "DND35ZUKUS.BAB"}}</div>
          <div class="stat-value">{{combat.babDisplay}}</div>
        </div>

        <div class="combat-stat">
          <div class="stat-label">Grapple</div>
          <div class="stat-value">{{combat.grappleDisplay}}</div>
        </div>
      </div>

      {{!-- Classes --}}
      <h3>Classes</h3>
      <div class="item-list classes-list">
        {{#each itemsByType.classes as |item|}}
        <div class="item" data-item-id="{{item._id}}">
          <span class="item-name">{{item.name}}</span>
          <span class="item-controls">
            <a class="item-edit" title="Edit"><i class="fas fa-edit"></i></a>
            <a class="item-delete" title="Delete"><i class="fas fa-trash"></i></a>
          </span>
        </div>
        {{/each}}
        <div class="item-create" data-type="class">
          <a><i class="fas fa-plus"></i> Add Class</a>
        </div>
      </div>

      {{!-- Buffs --}}
      <h3>Active Buffs</h3>
      <div class="item-list buffs-list">
        {{#each itemsByType.buffs as |item|}}
        <div class="item" data-item-id="{{item._id}}">
          <span class="item-name">{{item.name}}</span>
          <span class="item-controls">
            <a class="item-edit" title="Edit"><i class="fas fa-edit"></i></a>
            <a class="item-delete" title="Delete"><i class="fas fa-trash"></i></a>
          </span>
        </div>
        {{/each}}
        <div class="item-create" data-type="buff">
          <a><i class="fas fa-plus"></i> Add Buff</a>
        </div>
      </div>
    </div>

    {{!-- Features Tab --}}
    <div class="tab features" data-group="primary" data-tab="features">
      <h3>Feats</h3>
      <div class="item-list feats-list">
        {{#each itemsByType.feats as |item|}}
        <div class="item" data-item-id="{{item._id}}">
          <span class="item-name">{{item.name}}</span>
          <span class="item-controls">
            <a class="item-edit" title="Edit"><i class="fas fa-edit"></i></a>
            <a class="item-delete" title="Delete"><i class="fas fa-trash"></i></a>
          </span>
        </div>
        {{/each}}
        <div class="item-create" data-type="feat">
          <a><i class="fas fa-plus"></i> Add Feat</a>
        </div>
      </div>
    </div>

  </section>
</form>
